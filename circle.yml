# Customize the test machine
machine:
  node:
    version: 4.1.0
  ruby:
    version: 2.1.2

  # Override /etc/hosts
  services:
    - docker

dependencies:
  pre:
   - chmod +x -R scripts/*
#   - sh scripts/generate-v1-sdks-circleci.sh

test:
  override:
    - sh scripts/generate-v1-sdks-circleci.sh

general:
  artifacts:
    - "swagger-codegen/quantimodo_v1_skds.zip"
    - "swagger-codegen/api-docs.json"

deployment:
  prod:
    branch: master
    commands:
      - aws s3 sync swagger-codegen/quantimodo_v1_skds.zip s3://quantimodo-docs/ --delete